(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[263],{4595:function(e,n,s){Promise.resolve().then(s.bind(s,4927))},4927:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return x}});var t=s(7437),a=s(2265);s(381),s(3259);var r=(0,a.memo)(e=>{let n=(0,a.useCallback)(()=>{e.onTaskClickFunc(e.taskId)},[e]);return(0,t.jsx)("button",{className:"TaskButton",onClick:n,children:e.taskName},e.taskId)}),l=s(2670),i=s(7957),u=s(1991);let c=u.Ry({name:u.Z_().min(3,"название задачи должно быть длиннее 3 символов"),description:u.Z_().nullable()});var d=s(4073),o=s(1974),m=s(8121),h=s(7313),p=s(7421),f=s(9009),x=(0,a.memo)(()=>{let[e,n]=(0,a.useState)(""),[s,u]=(0,a.useState)("display"),{user:x}=(0,p.AuthContext)(),k=x.user,{handleSubmit:j,register:b,formState:{errors:v},getValues:g}=(0,l.cI)({resolver:(0,i.X)(c)}),[y,C]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=(0,m.cf)((0,m.hJ)(h.db,"users",k.uid,"tasks"),e=>{C(e.docs.map(e=>e.data()))});return()=>e()},[k.uid]);let S=(0,a.useCallback)(e=>(0,t.jsx)(r,{taskName:e.name,taskId:e.id,taskDescription:e.description,onTaskClickFunc:n},e.id),[]),N=(0,a.useCallback)(async()=>{let e=crypto.randomUUID();try{await (0,m.pl)((0,m.JU)(h.db,"users",k.uid,"tasks",e),{id:e,name:"",description:""}),n(e)}catch(e){console.log("errors",JSON.stringify(e,null,2))}},[null==k?void 0:k.uid]),I=(0,a.useCallback)(()=>{u("redact")},[]),Z=(0,a.useCallback)(async()=>{try{let n=g();await (0,f.r7)((0,m.JU)(h.db,"users",k.uid,"tasks",e),{name:n.name,description:n.description})}catch(e){console.log("errors",JSON.stringify(e,null,2))}u("display")},[e,g,k.uid]),_=(0,a.useCallback)(async()=>{try{await (0,m.oe)((0,m.JU)(h.db,"users",k.uid,"tasks",e)),n("")}catch(e){console.log("errors",JSON.stringify(e,null,2))}},[e,k.uid]),J=(0,a.useMemo)(()=>(u("display"),y.find(n=>n.id===e)),[e,y]);return(0,t.jsx)("div",{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{children:" Задачи "}),(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{children:(0,t.jsxs)("span",{children:[y.map(S),(0,t.jsx)("button",{className:"TaskButton",onClick:N,children:" + "})]})}),(0,t.jsxs)("div",{children:["display"===s&&""!=e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h1",{children:null==J?void 0:J.name}),(0,t.jsx)("div",{children:null==J?void 0:J.description}),(0,t.jsxs)("p",{children:[(0,t.jsx)(d.Z,{onClickFunk:_,label:"удалить"}),(0,t.jsx)(d.Z,{onClickFunk:I,label:"редактировать"})]})]}):null,"redact"===s&&""!=e?(0,t.jsxs)("form",{onSubmit:j(Z),children:[(0,t.jsxs)("h1",{children:["Имя задачи",(0,t.jsx)(o.Z,{register:b,name:"name",label:"",type:"text",placeholder:"",error:v.name,defaultValue:null==J?void 0:J.name})]}),(0,t.jsxs)("div",{children:["Описание задачи",(0,t.jsx)(o.Z,{register:b,name:"description",label:"",type:"text",placeholder:"",defaultValue:null==J?void 0:J.description})]}),(0,t.jsx)(d.Z,{label:"Сохранить"})]}):null]})]})]})})})},7421:function(e,n,s){"use strict";s.r(n),s.d(n,{AuthContext:function(){return i}});var t=s(7437),a=s(2265),r=s(7313);s(2182),s(161);let l=(0,a.createContext)({}),i=()=>(0,a.useContext)(l);n.default=e=>{let{children:n}=e,[s,i]=(0,a.useState)(!0),[u,c]=(0,a.useState)({user:null,isLogin:!1});return(0,a.useEffect)(()=>r.I.onAuthStateChanged(e=>{c({isLogin:!!e,user:e}),i(!1)}),[]),console.log("useState",u.user),(0,t.jsxs)(l.Provider,{value:{user:u,setUser:c},children:[s?(0,t.jsxs)("div",{className:"LoaderScreen",children:[(0,t.jsx)("span",{className:"Loader"})," "]}):null,s?null:n]})}},7313:function(e,n,s){"use strict";s.d(n,{I:function(){return i},db:function(){return u}});var t=s(6142),a=s(2738),r=s(8121);let l=(0,t.ZF)({apiKey:"AIzaSyA9gyR2Vzlx4Wbp0nLY7JnTGPwYk2rkxMQ",authDomain:"scrum-manager-e0978.firebaseapp.com",projectId:"scrum-manager-e0978",storageBucket:"scrum-manager-e0978.appspot.com",messagingSenderId:"116287469649",appId:"1:116287469649:web:582bb4f590465ef21d6070"}),i=(0,a.v0)(l),u=(0,r.ad)(l)},1974:function(e,n,s){"use strict";var t=s(7437);s(3595),n.Z=e=>{let{label:n,type:s,name:a,placeholder:r,register:l,error:i,defaultValue:u}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("b",{children:[(0,t.jsx)("label",{children:n}),(0,t.jsx)("input",{...l(a,{required:"error message"}),type:s,name:a,placeholder:r,id:"field_".concat(a),defaultValue:u})]}),i&&(0,t.jsx)("var",{children:null==i?void 0:i.message})]})}},4073:function(e,n,s){"use strict";var t=s(7437);s(3649),n.Z=e=>{let{label:n,onClickFunk:s}=e;return(0,t.jsx)("a",{children:(0,t.jsx)("button",{onClick:s,children:n})})}},381:function(){},2182:function(){},3595:function(){},161:function(){},3649:function(){},3259:function(){}},function(e){e.O(0,[358,54,449,342,971,69,744],function(){return e(e.s=4595)}),_N_E=e.O()}]);